<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>对手</title>
    <script src="https://cdn.staticfile.net/echarts/5.4.3/echarts.min.js"></script>
    <script src="https://cdn.staticfile.net/jquery/3.7.1/jquery.min.js"></script>
</head>
<body style="background-color: #100C2A;">
<div id="main" style="top:100px;width: 1200px;height:2000px;position: relative;margin: auto;"></div>
<script type="text/javascript">
    let chartBar = echarts.init(document.getElementById('main'), 'dark');

    let params = new URLSearchParams(window.location.search)
    // let intervalX = 500
    let code = params.get('code')
    let date = params.get('date')
    let player = params.get('pl')

    chartBar.showLoading('default', {
        maskColor: '#100C2A',
        color: '#4992ff',
        textColor: '#4992ff',
    });

    let colorLight =
        ['#5470c6',
            '#91cc75',
            '#fac858',
            '#ee6666',
            '#73c0de',
            '#3ba272',
            '#fc8452',
            '#9a60b4',
            '#ea7ccc'];

    let colorPalette = [
        '#4992ff',
        '#7cffb2',
        '#fddd60',
        '#ff6e76',
        '#58d9f9',
        '#05c091',
        '#ff8a45',
        '#8d48e3',
        '#dd79ff'
    ];

    $.ajax({
        type:'POST',
        url: '/api/competitor',
        contentType: "application/json",
        data: JSON.stringify({
            date: date,
            code: code,
            player: player
        }),
        success: function(result) {
            chartBar.hideLoading();

            chartBar.setOption(
                {
                    title: {
                        text:  '对手'
                    },
                    tooltip: {
                        trigger: 'axis',
                        axisPointer: {
                            type: 'shadow'
                        }
                    },
                    legend: {
                    },
                    grid: {
                        containLabel: true
                    },
                    xAxis: {
                        type: 'value',
                        // interval:intervalX,
                    },
                    yAxis: {
                        type: 'category',
                        axisTick: {
                            show: false
                        },
                        data: result.data.pls
                    },
                    series: [
                        {
                            name: 'bpt',
                            type: 'bar',
                            stack: 'total',
                            label: {
                                show: true,
                            },
                            emphasis: {
                                focus: 'series'
                            },
                            data: result.data.linePt
                        },
                        {
                            name: 'bzy',
                            type: 'bar',
                            stack: 'total',
                            label: {
                                show: true,
                            },
                            emphasis: {
                                focus: 'series'
                            },
                            data: result.data.lineZy
                        },
                        {
                            name: 'cnt',
                            type: 'bar',
                            stack: 'total',
                            label: {
                                show: true,
                            },
                            emphasis: {
                                focus: 'series'
                            },
                            data: result.data.lineCnt
                        },
                        {
                            name: 'per',
                            type: 'bar',
                            stack: 'total',
                            label: {
                                show: true,
                            },
                            emphasis: {
                                focus: 'series'
                            },
                            data: result.data.linePer
                        },
                    ]
                }
            );
        },
        error: function(xhr, status, error) {
            alert(status)
        }
    })

</script>
</body>
</html>